@page "/MeowFacts"
@rendermode InteractiveServer
@using BlazorWebApp1.APIs
@inject PublicApisService publicApisService

<div class="pa-8 d-flex flex-column gap-8">

	<h3>MeowFacts</h3>

	<div>
		<span>Fetches cat facts from </span>
		<MudLink Href="https://meowfacts.herokuapp.com">https://meowfacts.herokuapp.com</MudLink>
	</div>


	<MudButton OnClick="@(async () => await UpdateCats())" Color="Color.Primary" Variant="Variant.Filled">Load cats</MudButton>

	@if (catFactsResponse != null)
	{
		@foreach (var fact in catFactsResponse.Data)
		{
			<MudPaper Class="pa-4">@fact</MudPaper>
		}
	}
	else
	{
		<p>No facts yet</p>
	}
</div>

@code {

	CatFactsResponse? catFactsResponse;

	async Task UpdateCats()
	{
		catFactsResponse = await publicApisService.GetMeowFacts();
	}
}
